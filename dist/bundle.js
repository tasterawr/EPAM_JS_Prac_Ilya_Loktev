(()=>{"use strict";const e=document.getElementById("all_voices"),t=document.getElementById("microphone"),n=document.getElementById("stream"),o=document.getElementById("main_text"),s=document.getElementById("allVoicesList"),c="#7f34ad";function i(){const o="dimgray";e.style.color=o,t.style.color=o,n.style.color=o}e.addEventListener("click",(function(){o.innerText="Active: All voices mode",i(),e.style.color=c,function(){const e=new URL("https://voicy-speaker.herokuapp.com/voices"),t=new XMLHttpRequest;t.open("GET",e.toString()),t.responseType="json",t.send(),t.onload=function(){if(200!=t.status)alert(`Ошибка ${t.status}: ${t.statusText}`);else{const e=t.response.length;for(let n=e-5;n<e;n++)if(t.response.length){const e=document.createElement("audio");e.controls=!0;const o=new Blob([new Uint8Array(t.response[n].audioBlob[0].data).buffer]),s=URL.createObjectURL(o);e.src=s;const c=document.createElement("li");c.classList.add("audioElement"),c.classList.add("voice_message"),c.innerHTML=t.response[n].timeStamp.substr(0,24),c.appendChild(e),document.getElementById("allVoicesList").appendChild(c)}}}}()})),t.addEventListener("click",(function(){s.innerHTML="",o.innerText="Active: Speaker mode",i(),t.style.color=c})),n.addEventListener("click",(function(){s.innerHTML="",o.innerText="Active: Stream mode",i(),n.style.color=c,function(){const e=new URL("https://voicy-speaker.herokuapp.com/voices"),t=new XMLHttpRequest;t.open("GET",e.toString()),t.responseType="json",t.send(),t.onload=function(){if(200!=t.status)alert(`Ошибка ${t.status}: ${t.statusText}`);else{const e=t.response.length;if(t.response.length){const n=new Blob([new Uint8Array(t.response[e-1].audioBlob[0].data).buffer]),o=URL.createObjectURL(n);new Audio(o).play()}}}}()}))})();